jQuery(function(t){if("undefined"==typeof wc_add_to_cart_params)return!1;var e=function(){this.requests=[],this.addRequest=this.addRequest.bind(this),this.run=this.run.bind(this),t(document.body).on("click",".add_to_cart_button",{addToCartHandler:this},this.onAddToCart).on("click",".remove_from_cart_button",{addToCartHandler:this},this.onRemoveFromCart).on("added_to_cart",this.updateButton).on("ajax_request_not_sent.adding_to_cart",this.updateButton).on("added_to_cart removed_from_cart",{addToCartHandler:this},this.updateFragments)};e.prototype.addRequest=function(t){this.requests.push(t),1===this.requests.length&&this.run()},e.prototype.run=function(){var t=this,e=t.requests[0].complete;t.requests[0].complete=function(){"function"==typeof e&&e(),t.requests.shift(),t.requests.length>0&&t.run()};let a=this.requests[0];window.fetch(a.url,{method:a.type,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:a.data}).then(t=>{if(!t.ok)throw Error(t.statusText);return t.json()}).then(a.success).catch(t=>a.error&&a.error()).finally(()=>a.complete&&a.complete())},e.prototype.onAddToCart=function(e){var a=t(this);if(a.is(".ajax_add_to_cart")){if(!a.attr("data-product_id"))return!0;if(e.preventDefault(),a.removeClass("added"),a.addClass("loading"),!1===t(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[a]))return t(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,a]),!0;var r={};t.each(a.data(),function(t,e){r[t]=e}),t.each(a[0].dataset,function(t,e){r[t]=e}),t(document.body).trigger("adding_to_cart",[a,r]),e.data.addToCartHandler.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:t.param(r),success:function(e){if(e){if(e.error&&e.product_url){window.location=e.product_url;return}if("yes"===wc_add_to_cart_params.cart_redirect_after_add){window.location=wc_add_to_cart_params.cart_url;return}t(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,a]),t("#checker-container-mob").load("/ #checker-container-mob span"),t("#checker-container-pc").load("/ #checker-container-pc span")}},dataType:"json"})}},e.prototype.onRemoveFromCart=function(e){var a=t(this),r=a.closest(".woocommerce-mini-cart-item");e.preventDefault(),r.block({message:null,overlayCSS:{opacity:.6}}),e.data.addToCartHandler.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),data:new URLSearchParams({cart_item_key:a.data("cart_item_key")}).toString(),success:function(e){if(!e||!e.fragments){window.location=a.attr("href");return}t(document.body).trigger("removed_from_cart",[e.fragments,e.cart_hash,a]),t("#checker-container-mob").load("/ #checker-container-mob span"),t("#checker-container-pc").load("/ #checker-container-pc span")},error:function(){window.location=a.attr("href")},dataType:"json"})},e.prototype.updateButton=function(e,a,r,o){(o=void 0!==o&&o)&&(o.removeClass("loading"),a&&o.addClass("added"),a&&!wc_add_to_cart_params.is_cart&&0===o.parent().find(".added_to_cart").length&&o.after('<a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),t(document.body).trigger("wc_cart_button_updated",[o]))},e.prototype.updateFragments=function(e,a){a&&(t.each(a,function(e){t(e).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})}),t.each(a,function(e,a){t(e).replaceWith(a),t(e).stop(!0).css("opacity","1").unblock()}),t(document.body).trigger("wc_fragments_loaded"))},new e});